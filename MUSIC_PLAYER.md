# üéµ –ú–Ω–æ–≥–æ–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤—ã–π –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ü–ª–µ–µ—Ä

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –º—É–∑—ã–∫–∏ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ YouTube.

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### 1. **YouTube** üì∫
–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç—Ä–µ–∫–∞ –∏–ª–∏ –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ

**–ü—Ä–∏–º–µ—Ä—ã:**
```
/play Metallica Enter Sandman
/play https://www.youtube.com/watch?v=y9K18CGEFhY
/play youtu.be/y9K18CGEFhY
```

### 2. **Spotify** üéß
–°—Å—ã–ª–∫–∏ –Ω–∞ —Ç—Ä–µ–∫–∏, –∞–ª—å–±–æ–º—ã –∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã Spotify

**–ü—Ä–∏–º–µ—Ä—ã:**
```
/play spotify:track:3n3Ppam7vgaVa1iaRUc9Lp
/play https://open.spotify.com/track/3n3Ppam7vgaVa1iaRUc9Lp
/play https://open.spotify.com/album/1J1K4K...
/play https://open.spotify.com/playlist/37i9...
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Spotify —Å—Å—ã–ª–∫–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ–Ω—ã –Ω–∞ YouTube –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç—Ä–µ–∫–∞.

### 3. **Soundcloud** ‚òÅÔ∏è
–°—Å—ã–ª–∫–∏ –Ω–∞ —Ç—Ä–µ–∫–∏ –∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã Soundcloud

**–ü—Ä–∏–º–µ—Ä—ã:**
```
/play https://soundcloud.com/artist/track-name
/play https://soundcloud.com/artist/sets/playlist-name
```

### 4. **Yandex.Music** üé∂
–°—Å—ã–ª–∫–∏ –Ω–∞ –º—É–∑—ã–∫—É –∏–∑ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
```
/play https://music.yandex.ru/album/123456/track/789
```

### 5. **–ü—Ä—è–º—ã–µ HTTP –ø–æ—Ç–æ–∫–∏** üåê
–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ MP3, M3U8 (HLS) –∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –∞—É–¥–∏–æ

**–ü—Ä–∏–º–µ—Ä—ã:**
```
/play https://example.com/track.mp3
/play https://stream.example.com/radio.m3u8
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

1. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (URL –∏–ª–∏ —Ç–µ–∫—Å—Ç)
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (YouTube, Spotify, Soundcloud, Yandex, HTTP)
3. –í—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞
4. –ü–µ—Ä–µ–¥–∞–µ—Ç –ø–æ—Ç–æ–∫ –≤ –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä Discord

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**audioSourceDetector.js** —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- `detectSource(query)` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `getAudioStream(queryOrUrl)` - –ø–æ–ª—É—á–∞–µ—Ç playable –ø–æ—Ç–æ–∫/URL
- `handleYouTube()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ YouTube (–ø–æ–∏—Å–∫ + play-dl/ytdl-core)
- `handleSpotify()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Spotify (–ø–∞—Ä—Å–∏–Ω–≥ + –ø–æ–∏—Å–∫ –Ω–∞ YouTube)
- `handleSoundcloud()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Soundcloud (soundcloud-scraper + yt-dlp fallback)
- `handleYandex()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Yandex.Music (yt-dlp)
- `handleHTTP()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä—è–º—ã—Ö –ø–æ—Ç–æ–∫–æ–≤

## –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "soundcloud-scraper": "^latest",
  "spotify-uri": "^latest",
  "axios": "^1.0.0",
  "play-dl": "^1.9.0",
  "ytdl-core": "^4.11.0"
}
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

- **yt-dlp** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è): –¥–ª—è Yandex.Music –∏ fallback'–æ–≤
  ```bash
  pip install yt-dlp
  ```
  –∏–ª–∏
  ```bash
  npm install -g yt-dlp  # –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ npm
  ```

- **ffmpeg**: –¥–ª—è —Ç—Ä–∞–Ω—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∞—É–¥–∏–æ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ ffmpeg-static)

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ï—Å–ª–∏ —Ç—Ä–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
1. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É —Å –¥–µ—Ç–∞–ª—è–º–∏
2. –í—ã–≤–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
3. –î–ª—è Spotify —Å—Å—ã–ª–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç —Ç—Ä–µ–∫ –Ω–∞ YouTube

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **Spotify**: API —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –Ω–∞ YouTube)
- **Soundcloud**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑-–∑–∞ –≥–µ–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- **Yandex.Music**: –¢—Ä–µ–±—É–µ—Ç yt-dlp –¥–ª—è —Ä–∞–±–æ—Ç—ã
- **HTTP –ø–æ—Ç–æ–∫–∏**: –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-5 —Å–µ–∫—É–Ω–¥ (–ø–æ–∏—Å–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ + –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ç–æ–∫–∞)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏ –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Native Spotify API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Å API –∫–ª—é—á–æ–º)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Apple Music
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Amazon Music
- [ ] –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- [ ] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–æ–≤
